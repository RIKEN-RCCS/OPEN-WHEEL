## GitHub Actions の実行について

**master**ブランチを push した際にテストが自動実行されます。  
テスト結果は、'Actons'タブの'Cypress Test' をクリックし、確認できます。  
エラーが表示された場合、ログを確認してください。また、`GitHub Actions 実行時の注意点について` を参照し、該当する場合再実行を実施し、確認する。  
エラーの詳細の確認を行う場合'テストコードのローカル実行について'を参照してください。

## テストコードのローカル実行について

ローカルで実行する場合、リポジトリの'test'ディレクトリをクローンし、以下の手順で実行していください。

1. 必要なモジュールをインストールする。

```
> npm install
```

2. cypress を起動する。

```
> npm run test
```

3. テストコードをローカル実行用に修正する。

   - [support/commands.js](cypress.config.cjs) の 22-26 行目の remotehost 設定をローカル環境用に修正する。

   ```javascript
   env: {
      "CYPRESS_WHEEL_TEST_REMOTEHOST": "remotehost",
      "CYPRESS_WHEEL_TEST_REMOTE_PASSWORD": "password",
      "CYPRESS_WHEEL_TEST_HOSTNAME": "hostname",
      "CYPRESS_WHEEL_TEST_PORT": 8000,
      "CYPRESS_WHEEL_TEST_USER": "user"
    }
   ```

   - 実行したいテストケースを決定する。（対象ケースのテストコード'it'の後ろに'.only'をつける。）

4. cypressAPI が起動したら E2E テスト ⇒「対象ブラウザ」⇒spec.cy.js の順にクリックする。

## テスト対象外ケースについて

自動テストで実装困難なテストケースがあり、手動でテストしてください。

test No.2 Drag&Drop

- `テスト内容` ファイル表示エリアにローカルファイルをドラッグアンドドロップし、アップロードする。
- `手動テスト` Task コンポーネントの FIles プロパティにローカルフォルダからファイルをドラッグアンドドロップする。
- `期待値` ファイル表示エリアにファイルが正しくアップロードされること。

test No.7 File upload 1

- `テスト内容` ファイルアップロードボタンをクリックし、ローカルファイルをアップロードする。
- `手動テスト` Task コンポーネントの FIles プロパティ配下のファイルアップロードボタンをクリックし、ローカルファイルをアップロードする。
- `期待値` ファイル表示エリアにファイルが正しくアップロードされること。

test No.8 File upload 2

- `テスト内容` ファイル表示エリアに作成したフォルダを選択した状態でファイルアップロードボタンをクリックし、ローカルファイルをアップロードする。
- `手動テスト` Task コンポーネントの FIles プロパティ配下のファイル表示エリアに作成したフォルダを選択した状態でファイルアップロードボタンをクリックし、ローカルファイルをアップロードする。
- `期待値` ファイル表示エリアの選択したフォルダ配下にファイルが正しくアップロードされること。

## GitHub Actions 実行時の注意点について

- GitHub Actions から割り当てられたリソースによっては Cypress の負荷に対応できない場合があり、エラーとなるケースがあります。その際は、再実行が必要となります。
- テスト再実行は、workflow ログの右上の'Re-run jobs'から実行できます。
