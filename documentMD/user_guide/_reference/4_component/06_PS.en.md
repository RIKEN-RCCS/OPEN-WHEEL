---
title: ParameterStudy
lang: en
permalink: /reference/4_component/06_PS.html
---

![img](./img/PS.png "Parameter Study")

The ParameterStudy component (The following PS components)
Within the parameter space specified in parameterFile
Execute the lower components as parallel as possible for all combinations.


The following properties can be set for PS components:

### parameterFile
![img](./img/PS_setting.png "PS setting")

<!--Specifies the parameter configuration file (Json file) that defines the parameter space.  
Since parameterSetting.json is specified by default, select it from the Files area and edit it in the text editor screen.  
Use the PS-config mode of the [Text Editor Screen]({{site.baseurl}}/reference/3_workflow_screen/3_editor.html#ps-config-mode) to create the parameterFile.-->
Specifies the parameter settings file (Json file) that defines the parameter space.  
The parameterFile defaults to parameterSetting.json. Select parameterSetting.json from the Files area and edit it in the text editor screen.  
Use the PS-config mode of the [Text Editor Screen]({{site.baseurl}}/reference/3_workflow_screen/3_editor.html#ps-config-mode) to edit parameterFile.

<!--![img](./img/ps-config_mode.png "PS-config mode")-->

### force overwrite
When you create a directory with parameters,
Sets whether to overwrite existing directories even if they exist.

### delete all instances
Specifies whether to remove the directory for individual copied parameters at the end of execution.

### parameter settings file
The parameter configuration file describes the parameter space for the parameter study and the file to replace the parameter (the target file).

![img](./img/ps-config_mode.png "PS-config mode")

#### targetFiles
![img](./img/targetFiles.png "targetFiles")

Sets the target file from which to overwrite the contents with parameter values during a parameter study.  
The target file can be a file owned by a subordinate component within a PS component.

Click the __+ add new target file__ button to open a dialog.  
The subcomponents under the PS component are displayed in a tree. Select any component whose file you want to target, and enter the file name in the text box.  
For example, in the figure below, the file run.sh for the task0 component is specified as the target file.

![img](./img/target_filename.png "target filename")

Click the __OK__ button to display the selected file in the list and open the specified file in the tab editor.

![img](./img/after_selecting_targetFiles.png "after selecting targetFiles")


#### parameters
![img](./img/parameters.png "parameters")

Defines the parameter space used to run the parameter study.  
In the target file, define the placeholders and parameter values for the variables used in the parameter study.
Placeholders are replaced with the value of the parameter when the target file is copied to the directory where it is actually executed.

From the target file, drag to select a placeholder for the variable you want to use in the parameter study.
The selection appears in the __current selected text__ text box.

![img](./img/select_placeholder.png "select placeholder")

Then click the __+ add new parameter__ button to set the parameter value to assign to the selected placeholder.  
Select a method to select a parameter value from the drop-down list to define the parameter value.  
For example, in the figure below, foo, bar, and baz are defined as parameter values to be assigned to placeholders during the parameter study.

![img](./img/value_list.png "value list")

Click the __OK__ button to display the placeholders in the list and place them in the Tab Editor in double curly braces ( "\{\{" and "\}\}" ).

![img](./img/set_placeholder.png "set placeholder")
![img](./img/parameters_list.png "parameters list")

For example, when you run a parameter study using the above definition, the value of value is expanded in the placeholder portion to create a copy of the following:

```
VALUE=foo
```
```
VALUE=bar
```
```
VALUE=baz
```

There are three ways to select parameter values (min-max-step, list, files).
Each pattern is described below.

##### min-max-step
![img](./img/pattern_min-max-step.png "min-max-step")

A pattern that can be used when the parameter value is an evenly spaced sequence of numbers defined by three values: min (minimum), max (maximum), and step (step width).
Any of min, max, or step can be written as an integer, a fixed-point number, or a floating-point number (ex. 1.0e-2). Negative values (starting with -) are also allowed.

##### list
![img](./img/pattern_list.png "list")

A pattern that defines parameter values as a list.

##### files
![img](./img/pattern_failes.png "files")

A pattern that defines parameter values as a list, similar to list.  
However, globs (wildcards) can be specified for values in the list, and only files that exist at run time are actually used as parameters.
Also, files specified as parameters for this pattern are only copied to the actual directory.

#### scatter
![img](./img/scatter.png "scatter")

Before running the parameter study, set up the files that will be distributed to each subcomponent individually.

The settings for the distributed file are defined in the dialog box that opens when you click the __+ add new scatter setting__ button.

![img](./img/scatter_setting.png "scatter setting")

| Component | Description |
|----------|---------------------------------|
|srcName|Specifies the file name to copy from|
|dstNode|Select the destination component|
|dstName|Specifies the destination file name|

#### gather
![img](./img/gather.png "gather")

After completing the parameter study, set the files to be collected from each subcomponent.  
The WHEEL GUI can only refer to result files collected by gather. For this reason, files that are required for subsequent components or that need to be checked must be set in gather.

The settings for the collected files are defined in the dialog that opens when you click the __+ add new gather setting__ button. 

![img](./img/gather_setting.png "gather setting")

| Component | Description |
|----------|---------------------------------|
|srcName|Specifies the file name to copy from|
|srcNode|Select the component to copy from|
|dstName|Specifies the destination file name|

#### Notes common to scatter / gather
Common caveats for scatter/gather are:

##### srcName
srcName can be a placeholder set with glob (wildcard) and parameters in the same format as the target file (For example, \{\{ Placeholder Name \}\}).  
You can also specify a directory name instead of a file name. If a directory name is specified, all directories and files under the specified directory will be copied recursively.

##### dstName
dstName, like srcName, also accepts placeholders set by parameters (For example, \{\{ Placeholder Name \}\}).
However, glob (wildcard) is not allowed in dstName. A trailing '/' or '\\' is treated as a directory, and the file specified by srcName is copied under the dstName directory.
If the destination directory does not exist, the file is copied after the new directory is created.

Note that if you set a fixed file name for dstName, the system attempts to copy multiple parastas to the same file.
Therefore, depending on the environment where WHEEL is running (OS, file system, etc.) and the timing of the copy operation, the copied file may be corrupted.
Therefore, when copying files with the same name, it is recommended that you specify a name using the dstName parameter.

##### dstNode / srcNode
By selecting a subcomponent as srcNode or dstNode, the path interpretation of srcName/dstName can begin in the directory of the subcomponent rather than the PS component.
Although srcName and dstName can be written directly including the directory name of the subordinate component, this will not work if the name of the subordinate component changes.
Therefore, it is recommended that you use srcNode/dstNode to select subcomponents whenever possible.

### PS Component Run-time Behavior
The PS component reads the parameter configuration file at the start of execution.
directories corresponding to all combinations in the defined parameter space.
Create it by copying its own directory.

In this case, the file set to `targetFiles` in the parameter configuration file is not a simple copy.
The placeholders in the file are rewritten and copied to the parameter settings.

Also, a file set to `scatter` can be set to
Only the necessary directories are renamed and copied.
You can also use parameter values as names.

The components in the copied directory are executed in parallel, but
Task components are executed in parallel within the limit of the number of concurrent executions.

At the end of component execution for all parameters
Only files set to `gather` are collected under the original directory.
Again, you can rename the file using the value of the parameter.
If files with the same name, such as application execution result files, have been created, use this function to rename and collect them.

__About files not specified by the gather feature__  
Files not specified by the gather function are not erased unless `delete all instances` is specified.  
However, it is placed in a directory that is not accessible from the WHEEL GUI, and cannot be accessed after execution is finished.
{: .notice--info}


--------
[Return to Component Details]({{site.baseurl}}/reference/4_component/)
