# For

![img](./img/for.png "for")

Forコンポーネントは、FortranのDoループのように指定されたインデックス値に応じて
下位コンポーネントを繰り返し実行します。

Forコンポーネントに設定できるプロパティは以下のとおりです。

### start
インデックスの始値を設定します。

### end
インデックスの終値を設定します。

### step
インデックス更新時の更新幅を設定します。

### number of instances to keep
各インデックスで処理を行なった時のディレクトリを最大何個まで残すかを指定します。
無指定の時は、全てのディレクトリが保存されます。

## Forコンポーネント実行時の挙動
Forコンポーネントが初めて実行される時、コンポーネントのディレクトリはインデックスの値を末尾につけた名前に
コピーされます。
コピーされたディレクトリ内の下位コンポーネントの実行が全て終了すると、新しいインデックス値が計算され
その値に基いてさらにディレクトリがコピーされます。

この処理は順次繰り返し実行され、インデックスの値が終値を超えるまで続けられます。
終値を超えた時点のディレクトリは元のディレクトリにコピーされ、Forコンポーネントの処理は終了します。
なお、stepにマイナスの値を設定した場合も始値 > 終値 となっていれば正常に実行されます。
この場合はインデックスが終値を下回ると実行終了となります。


例えば、rt=1, end=3,step=2と設定された `for`というコンポーネントは
次のように処理されます。

1. `for`ディレクトリが`for_1`ディレクトリにコピーされる
2. `for_1`ディレクトリ内のコンポーネントが順次実行される
3. index計算 1+2 = 3  => 終値の3と等しいので次のループを実行する
4. `for_1`ディレクトリが`for_3`ディレクトリにコピーされる
5. `for_3`ディレクトリ内のコンポーネントが順次実行される
6. index計算 3+2 = 5  => 終値の3を超えているので、終了処理を行なう
7. `for_3`ディレクトリを`for`ディレクトリにコピー

number of instance to keepの値が0以外に設定されていた場合は、4,7の処理を行なった時に
設定された数を超える古いディレクトリ(`for_1`や`for_3`など)を削除します。

--------
[ページの先頭に戻る](#コンポーネントの詳細)
