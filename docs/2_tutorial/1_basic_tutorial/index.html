<!DOCTYPE html>
<html>
  <head>
    <style>
      /*! ADAPTED
    Typeplate : Starter Kit
    URL ........... http://typeplate.com
    Version ....... 3.0.2
    Github ........ https://github.com/typeplate/starter-kit
    Authors ....... Dennis Gaebel (@gryghostvisuals) & Zachary Kain (@zakkain)
    License ....... Creative Commmons Attribution 3.0
    License URL ... https://github.com/typeplate/starter-kit/blob/master/license.txt
    */

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        text-rendering: optimizeLegibility;
        line-height: 1;
        margin-top: 0;
        color: #222;
      }

      blockquote + figcaption cite {
        display: block;
        font-size: inherit;
        text-align: right;
      }

      body {
        word-wrap: break-word;
      }

      pre code {
        word-wrap: normal;
      }

      body {
        -webkit-hyphens: auto;
        -ms-hyphens: auto;
        hyphens: auto;
        color: #444;
      }

      h1 {
        font-size: 2em;
        /* 2*16 = 32 */
      }

      h2 {
        font-size: 1.5em;
        /* 1.5*16 = 24 */
      }

      h3 {
        font-size: 1.17em;
        /* 1.17*16 = 18.72 */
      }

      h4 {
        font-size: 1em;
        /* 1*16 = 16 */
      }

      h5 {
        font-size: 0.83em;
        /* 0.83*16 = 13.28 */
      }

      h6 {
        font-size: 0.75em;
        /* 0.75*16 = 12 */
      }

      h1 {
        margin: 2.42424rem 0 1.454544rem;
      }

      h2 {
        margin: 2.0202rem 0 1.21212rem;
      }

      h3 {
        margin: 1.61616rem 0 1rem;
      }

      h4 {
        margin: 1.21212rem 0 1;
      }

      h5 {
        margin: 0.80808rem 0;
      }

      h6 {
        margin: 0.70707rem 0;
      }

      p {
        margin: auto auto 1.5rem;
      }

      small {
        font-size: 65%;
      }

      input,
      abbr,
      acronym,
      blockquote,
      code,
      kbd,
      q,
      samp,
      var {
        -webkit-hyphens: none;
        -ms-hyphens: none;
        hyphens: none;
      }

      pre {
        white-space: pre;
      }

      pre code {
        white-space: -moz-pre-wrap;
        white-space: pre-wrap;
      }

      code {
        white-space: pre;
        font-family: SF Mono, Consolas, Dejavu Sans Mono, Menlo, monospace;
      }

      abbr {
        -webkit-font-variant: small-caps;
        -moz-font-variant: small-caps;
        -ms-font-variant: small-caps;
        font-variant: small-caps;
        font-weight: 600;
        text-transform: lowercase;
        color: gray;
      }

      abbr[title]:hover {
        cursor: help;
      }

      /* FROM http://purecss.io/layouts/side-menu/  adapted to remove pure classes*/

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
          "Segoe UI Symbol";
        color: #444;
      }

      img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: auto;
      }

      code,
      pre {
        background-color: #f5f5f5;
        color: #444;
        border-radius: 2px;
        text-shadow: 0px 1px 0px white;
        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.15);
      }

      pre code {
        border: none;
        box-shadow: none;
      }

      pre {
        padding: 0.5em;
      }

      code {
        display: inline-block;
        padding: 0 0.5em;
        line-height: 1.4;
        font-size: 0.9em;
      }

      table {
        border-spacing: 0;
        margin-bottom: 1.5rem;
      }

      table th,
      table td {
        padding: 0.3em 0.7em;
      }

      table th {
        background-color: #f4f4f4;
        border-bottom: 2px solid #444;
      }

      table td {
        border: 1px solid #f5f5f5;
      }

      /* Add transition to containers so they can push in and out. */

      #layout,
      #menu,
      .menu-link {
        -webkit-transition: all 0.2s ease-out;
        -moz-transition: all 0.2s ease-out;
        -ms-transition: all 0.2s ease-out;
        -o-transition: all 0.2s ease-out;
        transition: all 0.2s ease-out;
      }

      /* This is the parent `<div>` that contains the menu and the content area. */

      #layout {
        position: relative;
        padding-left: 0;
      }

      #layout.active #menu {
        left: 250px;
        width: 250px;
      }

      #layout.active .menu-link {
        left: 250px;
      }

      /* The content `<div>` is where all your content goes. */

      .content {
        margin: 50px auto;
        padding: 0 2em;
        max-width: 80ex;
        line-height: 1.6em;
      }

      /*
      The `#menu` `<div>` is the parent `<div>` that contains the menu that
      appears on the left side of the page.
      */

      #menu {
        margin-left: -250px;
        /* "#menu" width */
        width: 250px;
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        z-index: 1000;
        /* so the menu or its navicon stays above all content */
        background: #f4f4f4;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        font-size: 0.9em;
      }

      @media print {
        #menu,
        .menu-link {
          display: none !important;
        }
      }

      a,
      a * {
        text-decoration: none;
        color: #2483cc;
      }

      a:visited {
        text-decoration: none;
        color: #2483cc;
      }

      /* All anchors inside the menu should be styled like this. */

      #menu a {
        display: block;
        padding: 0.5em 0.5em;
      }

      #menu a:first-letter {
        text-transform: capitalize;
      }

      #menu ul {
        list-style-type: none;
        padding: 0;
        margin: 1em 0.5em;
      }

      #menu ul ul {
        margin-top: 0.5em;
        margin-left: 0.5em;
        border-left: 4px solid rgba(255, 255, 255, 0.5);
      }

      /* Change color of the anchor links on hover/focus. */

      #menu li a:hover,
      #menu li a:focus {
        background: rgba(255, 255, 255, 0.4);
      }

      /* This styles the selected menu item `<li>`. */

      #menu li a.active {
        background: rgba(0, 0, 0, 0.05);
      }

      /* This styles a link within a selected menu item `<li>`. */

      #menu li a.active {
        color: #222;
      }

      /* This styles the menu heading. */

      #menu li.heading {
        font-size: 0.9em;
        text-transform: uppercase;
        color: #000;
      }

      #menu li.heading > * {
        padding: 0.5em;
        display: block;
      }

      #menu li.heading a {
        color: #0c68af;
      }

      /* -- Dynamic Button For Responsive Menu -------------------------------------*/

      /*
      `.menu-link` represents the responsive menu toggle that shows/hides on
      small screens.
      */

      .menu-link {
        position: fixed;
        display: block;
        /* show this only on small screens */
        top: 0;
        left: 0;
        /* "#menu width" */
        font-size: 10px;
        /* change this value to increase/decrease button size */
        z-index: 10;
        width: 2em;
        height: auto;
        padding: 1.6em 1.2em;
        border-radius: 0 2px 2px 0;
      }

      .menu-link:hover {
        background: #f4f4f4;
      }

      .menu-link span {
        position: relative;
        display: block;
      }

      .menu-link span,
      .menu-link span:before,
      .menu-link span:after {
        background-color: #555;
        width: 100%;
        height: 0.2em;
        border-radius: 1em;
      }

      .menu-link span:before,
      .menu-link span:after {
        position: absolute;
        margin-top: -0.6em;
        content: " ";
      }

      .menu-link span:after {
        margin-top: 0.6em;
      }

      /* Hides the menu at `48em`, but modify this based on your app's needs. */

      @media (min-width: 48em) {
        .header,
        .content {
          padding-left: 2em;
          padding-right: 2em;
        }

        #layout {
          padding-left: 250px;
          /* left col width "#menu" */
          left: 0;
        }
        #menu {
          left: 250px;
        }

        .menu-link {
          position: fixed;
          left: 250px;
          display: none;
        }

        #layout.active .menu-link {
          left: 250px;
        }
      }

      @media (max-width: 48em) {
        /* Only apply this when the window is small. Otherwise, the following case results in extra padding on the left:
         * Make the window small.
         * Tap the menu to trigger the active state.
         * Make the window large again.
         */
        #layout.active {
          position: relative;
          left: 250px;
        }
      }

      /* Heading anchors and permalinks */
      h1[id],
      h2[id],
      h3[id],
      h4[id],
      h5[id],
      h6[id] {
        position: relative;
      }
      .heading-anchor-permalink {
        /* Position the permalink to the left of the title */
        position: absolute;
        right: 100%;
        /* Add some spacing as padding to not lose the hover */
        padding-right: 0.6rem;
        /* Make it only visible on heading hover, see below */
        opacity: 0;
      }
      h1[id]:hover .heading-anchor-permalink,
      h2[id]:hover .heading-anchor-permalink,
      h3[id]:hover .heading-anchor-permalink,
      h4[id]:hover .heading-anchor-permalink,
      h5[id]:hover .heading-anchor-permalink,
      h6[id]:hover .heading-anchor-permalink {
        opacity: 0.5;
      }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
  </head>

  <body>
    <div id="layout">
      <!-- Menu toggle -->
      <a href="#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
      </a>
      <nav id="menu">
        <ul>
<li><a class="" href="../../index.html">index</a></li>
<li class="heading"><a class="" href="../../1_how_to_boot/index.html">1 how to boot</a></li>
<ul>

</ul>
<li class="heading"><a class="" href="../index.html">2 tutorial</a></li>
<ul>
<li class="heading"><a class="active" href="index.html">1 basic tutorial</a></li>
<ul>

</ul>
<li class="heading"><a class="" href="../2_advanced_tutorial/index.html">2 advanced tutorial</a></li>
<ul>

</ul>
<li class="heading"><a class="" href="../3_application_tutorial/index.html">3 application tutorial</a></li>
<ul>
<li class="heading"><a class="" href="../3_application_tutorial/1_OpenFOAM_cavity/index.html">1 OpenFOAM cavity</a></li>
<ul>

</ul>
<li class="heading"><a class="" href="../3_application_tutorial/2_OpenFOAM_PS/index.html">2 OpenFOAM PS</a></li>
<ul>

</ul>
<li class="heading"><a class="" href="../3_application_tutorial/3_TensorFlow_mnist/index.html">3 TensorFlow mnist</a></li>
<ul>

</ul>

</ul>

</ul>
<li class="heading"><a class="" href="../../3_reference_manual/index.html">3 reference manual</a></li>
<ul>
<li class="heading"><a class="" href="../../3_reference_manual/1_home_screen/index.html">1 home screen</a></li>
<ul>

</ul>
<li class="heading"><a class="" href="../../3_reference_manual/2_remotehost_screen/index.html">2 remotehost screen</a></li>
<ul>

</ul>
<li class="heading"><span>3 workflow screen</span></li>
<ul>
<li><a class="" href="../../3_reference_manual/3_workflow_screen/1_graphview.html">1 graphview</a></li>
<li><a class="" href="../../3_reference_manual/3_workflow_screen/2_listview.html">2 listview</a></li>
<li><a class="" href="../../3_reference_manual/3_workflow_screen/3_editor.html">3 editor</a></li>
</ul>
<li class="heading"><span>4 component</span></li>
<ul>
<li><a class="" href="../../3_reference_manual/4_component/00_common.html">00 common</a></li>
<li><a class="" href="../../3_reference_manual/4_component/01_Task.html">01 Task</a></li>
<li><a class="" href="../../3_reference_manual/4_component/02_If.html">02 If</a></li>
<li><a class="" href="../../3_reference_manual/4_component/03_For.html">03 For</a></li>
<li><a class="" href="../../3_reference_manual/4_component/04_while.html">04 while</a></li>
<li><a class="" href="../../3_reference_manual/4_component/05_Foreach.html">05 Foreach</a></li>
<li><a class="" href="../../3_reference_manual/4_component/06_PS.html">06 PS</a></li>
<li><a class="" href="../../3_reference_manual/4_component/07_Workflow.html">07 Workflow</a></li>
<li><a class="" href="../../3_reference_manual/4_component/08_Storage.html">08 Storage</a></li>
<li><a class="" href="../../3_reference_manual/4_component/09_Source.html">09 Source</a></li>
<li><a class="" href="../../3_reference_manual/4_component/10_Viewer.html">10 Viewer</a></li>
<li><a class="" href="../../3_reference_manual/4_component/11_Stepjob.html">11 Stepjob</a></li>
<li><a class="" href="../../3_reference_manual/4_component/12_BulkjobTask.html">12 BulkjobTask</a></li>
</ul>

</ul>
<li class="heading"><a class="" href="../../4_ATTENTION/index.html">4 ATTENTION</a></li>
<ul>

</ul>
</ul>
      </nav>
      <article id="main" class="content">
        <h1 id="hello-wheel">Hello WHEEL <a class="heading-anchor-permalink" href="#hello-wheel">#</a></h1>
<h2 id="%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB(%E5%9F%BA%E7%A4%8E%E7%B7%A8)%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6">チュートリアル(基礎編)について <a class="heading-anchor-permalink" href="#%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB(%E5%9F%BA%E7%A4%8E%E7%B7%A8)%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6">#</a></h2>
<p>本チュートリアルでは、WHEELの基本的な機能のみを使ってワークフローを作成・実行することで
WHEELの使い方を学んでいきます。</p>
<h3 id="1.-%E6%96%B0%E8%A6%8F%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90">1. 新規プロジェクトの作成 <a class="heading-anchor-permalink" href="#1.-%E6%96%B0%E8%A6%8F%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90">#</a></h3>
<p>WHEELでは、1つのワークフローの実行単位のことを <strong>プロジェクト</strong> と呼びます。
プロジェクトの中には、実際にプログラムを実行する <strong>タスクコンポーネント</strong> を1つ以上作成し
これらの間で入出力ファイルをやりとりしたり、実行順序を制御することで1つのワークフローを構成します。</p>
<p>まず初めに空のプロジェクトを作成しましょう。</p>
<h4 id="%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%97%E3%81%A6-home-%E7%94%BB%E9%9D%A2%E3%81%B8%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9">ブラウザを起動して home 画面へアクセス <a class="heading-anchor-permalink" href="#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%97%E3%81%A6-home-%E7%94%BB%E9%9D%A2%E3%81%B8%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9">#</a></h4>
<p>ブラウザを起動して、WHEELサーバへ接続するとhome画面が表示されます。
画面左上に表示されている <strong>NEW</strong> ボタンをクリックしてください。</p>
<p><img src="./img/home_screen.png" alt="img" title="Home画面"></p>
<p>ディレクトリツリーが表示されるので、新規プロジェクトを作成するディレクトリを選択し(1)
プロジェクト名を入力して(2) <strong>CREATE</strong> ボタンをクリックしてください(3)
<img src="./img/new_project.png" alt="img" title="新規プロジェクト名入力ダイアログ"></p>
<p>プロジェクト名はディレクトリ名の一部として使われるため、アルファベット、数字および一部の記号のみしか使えません。</p>
<h4 id="%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E9%96%8B%E3%81%8F">プロジェクトを開く <a class="heading-anchor-permalink" href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E9%96%8B%E3%81%8F">#</a></h4>
<p>新しく作成したプロジェクトが一覧の中に表示されるので、プロジェクト名の左側にあるチェックボックスにチェックを入れて(1)
<strong>OPEN</strong> ボタンをクリックしてください(2)
<img src="./img/home_screen2.png" alt="img" title="Home画面2"></p>
<p>画面が遷移して、ワークフロー画面が表示されます。</p>
<h3 id="2.-%E6%9C%80%E5%88%9D%E3%81%AE%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E8%BF%BD%E5%8A%A0">2. 最初のコンポーネントの追加 <a class="heading-anchor-permalink" href="#2.-%E6%9C%80%E5%88%9D%E3%81%AE%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E8%BF%BD%E5%8A%A0">#</a></h3>
<p>ワークフロー画面では、画面左側にあるパレットからワークフローの部品である <strong>コンポーネント</strong> を
ドラッグ&amp;ドロップすることでワークフローを作成します。</p>
<p>ここでは、設定されたプログラムを実行する <strong>Taskコンポーネント</strong> を1つプロジェクトに追加してみましょう。</p>
<h4 id="task%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E8%BF%BD%E5%8A%A0">Taskコンポーネントの追加 <a class="heading-anchor-permalink" href="#task%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E8%BF%BD%E5%8A%A0">#</a></h4>
<p>まずはじめにTaskコンポーネント(1)をドラッグして、画面中央の黒い部分(2)にドロップしてください。
<img src="./img/workflow.png" alt="img" title="ワークフロー画面"></p>
<p>これで、プロジェクトに1つ目のコンポーネントが追加されました。
<img src="./img/workflow2.png" alt="img" title="Taskコンポーネント追加後の画面"></p>
<p>続けてこのTaskコンポーネントの中で実行する処理を定義します。</p>
<h3 id="3.-task%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E8%A8%AD%E5%AE%9A">3. Taskコンポーネントのプロパティ設定 <a class="heading-anchor-permalink" href="#3.-task%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E8%A8%AD%E5%AE%9A">#</a></h3>
<p>Taskコンポーネントを含む全てのコンポーネントは、動作を規定する <strong>プロパティ</strong> を設定することで
初めてワークフローの部品として機能するようになります。
Taskコンポーネントでは、実行したいプログラムを直接指定するのではなく、
そのプログラムを呼び出すbashスクリプトを作成し、実行したいスクリプトを指定する必要があります。</p>
<p>ここではサンプルとして、echoコマンドを呼び出すだけの単純なシェルスクリプトを作成して実行します。</p>
<h4 id="%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90">シェルスクリプトの作成 <a class="heading-anchor-permalink" href="#%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90">#</a></h4>
<p>さきほど作成した、<strong>task0</strong> と書かれた箱(1)をクリックすると画面右側にプロパティを設定するためのサブ画面(2)が表示されます。</p>
<p><img src="./img/property_screen.png" alt="img" title="プロパティ画面"></p>
<p>プロパティ画面上で下にスクロールすると、最下段に <strong>Files</strong> と書かれた行があります。(1)</p>
<p><img src="./img/property_screen2.png" alt="img" title="ファイルエリア-close"></p>
<p>この行をクリックすると、ファイル操作エリアが下側に展開されます。
シェルスクリプトの元となる空ファイルを作成するために、<strong>new file</strong> ボタン(1)をクリックしてください。</p>
<p><img src="./img/property_screen3.png" alt="img" title="ファイルエリア-open"></p>
<p>ファイル名を入力するダイアログが表示されるので、作成するシェルスクリプトの名前を入力(1)し、
<strong>OK</strong> ボタンをクリックしてください。(2)</p>
<p><img src="./img/newfile_dialog.png" alt="img" title="新規作成ファイル名入力"></p>
<p>正常にファイルが作成できたら、ファイル操作エリアの下にファイル名が表示されるのでクリックして選択してください(1)
ワークフロー画面左上の <strong>text editor</strong> ボタンをクリック(2)することで、このファイルを編集することができます。</p>
<p><img src="./img/workflow3.png" alt="img" title="スクリプトファイル選択"></p>
<p>ここでは、数値計算プログラムを実行する代わりにechoコマンドを用いて文字列を出力するシェルスクリプトを作成して実行します。
テキストエディタ部分(1)に <code>echo Hello WHEEL</code> と入力して画面右上の <strong>SAVE ALL FILES</strong> ボタン(2)をクリックします
最後に画面左上の <strong>graph view</strong> ボタン(3)をクリックして元の画面に戻ってください。</p>
<p><img src="./img/text_editor.png" alt="img" title="スクリプト編集"></p>
<h4 id="%E5%AE%9F%E8%A1%8C%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AE%E6%8C%87%E5%AE%9A">実行スクリプトの指定 <a class="heading-anchor-permalink" href="#%E5%AE%9F%E8%A1%8C%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AE%E6%8C%87%E5%AE%9A">#</a></h4>
<p>プロパティサブ画面を表示し、<strong>script</strong> とかかれたドロップダウンリストから、
さきほど作成したスクリプトファイルを選択してください。</p>
<p><img src="./img/property_screen4.png" alt="img" title="スクリプト指定"></p>
<p>最後に、画面右上の <strong>save project</strong> ボタン(1)をクリックして作成したプロジェクトをsaveしましょう。</p>
<p>WHEELでは、プロジェクトファイルの管理にgitを使っており、save処理を行なったタイミングで
リポジトリにコミットされます。
<strong>revert project</strong> ボタン(2)をクリックすると、直前にsaveした状態まで巻き戻すことができますが
redo(元に戻す処理を取り止めること)はできませんので、注意してください。</p>
<p><img src="./img/workflow4.png" alt="img" title="save および revert"></p>
<h3 id="4.-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E5%AE%9F%E8%A1%8C">4. プロジェクトの実行 <a class="heading-anchor-permalink" href="#4.-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E5%AE%9F%E8%A1%8C">#</a></h3>
<p>続いて、作成したプロジェクトを実行してみましょう。
<strong>run project</strong> ボタン(1)をクリックすると、プロジェクトの実行が始まります。</p>
<p><img src="./img/workflow5.png" alt="img" title="run project"></p>
<p>今回のプロジェクトでは、<code>echo</code>コマンドを使っているので、標準出力に文字が表示されます。
画面下部の▽ ボタン(2)をクリックすると、WHEELのログ出力や、プロジェクト内で実行したコマンドの
標準出力、標準エラー出力を表示するログ画面が表示されます。</p>
<p>ログ画面を開いた直後は <strong>INFO</strong> タブが表示されていて、WHEELのログ出力見えます。
標準出力に未読の出力がある時は、 <strong>STDOUT</strong> タブ(1)が緑色になります。このタブをクリックすると、echoコマンドの出力が確認できます。</p>
<p><img src="./img/log_screen.png" alt="img" title="ログ表示"></p>
<p>プロジェクトの実行が終了すると、画面上部のステータス表示が <strong>FINISHED</strong> に変わります。もしプロジェクト内で実行したプログラムが正常に終了しなかった時は、 <strong>FAILED</strong> となります。</p>
<p><img src="./img/project_state.png" alt="img" title="プロジェクトのステータス"></p>
<h3 id="5.-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E5%88%9D%E6%9C%9F%E5%8C%96">5. プロジェクトの初期化 <a class="heading-anchor-permalink" href="#5.-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E5%88%9D%E6%9C%9F%E5%8C%96">#</a></h3>
<p>プログラムによっては、実行後にファイルが出力されていたり、既存のファイルが書き換えられていることが
あります。
また、WHEELはプロジェクト内の個々のコンポーネントの実行状態を管理しているため、
プロジェクトの修正をしたり、再実行する時には一度実行開始前の状態に戻す必要があります。</p>
<p>本チュートリアルでは、この後プロジェクトに修正を加えながら何回か再実行していくので
画面上部にある <strong>stop and clean project</strong> ボタンをクリックして、実行開始前の状態に戻してください。</p>
<p><img src="./img/stop_and_clean_button.png" alt="img" title="cleanボタン"></p>
<h3 id="6.-%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%9B%E3%82%B9%E3%83%88%E8%A8%AD%E5%AE%9A%E3%81%AE%E4%BD%9C%E6%88%90">6. リモートホスト設定の作成 <a class="heading-anchor-permalink" href="#6.-%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%9B%E3%82%B9%E3%83%88%E8%A8%AD%E5%AE%9A%E3%81%AE%E4%BD%9C%E6%88%90">#</a></h3>
<p>最初のプロジェクトでは、ローカルホスト(WHEELを実行しているマシン)で全てのタスクを実行しました。
WHEELは、sshでログインした先のマシン上でタスクを実行する機能があります。</p>
<p>この機能を使うためには、初めに接続先ホストの情報をWHEEL上で設定する必要があります。</p>
<p>まず、画面右上のハンバーガーメニューをクリックしてください。</p>
<p><img src="./img/workflow6.png" alt="img" title="hunburger menu"></p>
<p>表示されたメニュー内の <strong>Remotehost editor</strong> をクリックすると別のタブでリモートホスト設定画面が表示されます。</p>
<p><img src="./img/remotehost_editor_button.png" alt="img" title="リモートホストエディタリンク"></p>
<p>画面上部の <strong>NEW REMOTE HOST SETTING</strong> ボタンをクリックすると新規ホスト設定ダイアログが表示されます。</p>
<p><img src="./img/remotehost_editor.png" alt="img" title="リモートホストエディタ"></p>
<p>フォームのうち次の項目に、値を入力してください。</p>
<ul>
<li>label          任意の文字列</li>
<li>Hostname       接続先のホスト名またはIPアドレス</li>
<li>User ID        接続先ホストでのユーザID</li>
<li>Host work dir  リモートホスト内で使用するディレクトリのパス</li>
</ul>
<p>例えば、 <code>foo.example.com</code> ホストに対して、ユーザー <code>bar</code> で接続し
タスクの実行を <code>/home/users/bar/baz</code> ディレクトリ以下で行なう設定を
<code>example</code> という名前で作成するとすれば、入力内容は次のようになります。</p>
<p><img src="./img/new_remotehost.png" alt="img" title="新規ホスト情報設定"></p>
<p>labelはWHEELが接続先ホストを区別するための文字列で、大文字小文字が区別されます。</p>
<p>Hostname, UserIDは接続先のホスト名(IPアドレスでも可)とユーザIDです。
これらのフィールドには、 <code>~/.ssh/config</code> で設定した値を指定することもできます。</p>
<p>Host work dirには接続先ホストでの作業ディレクトリを絶対パスで指定します。
WHEELがリモートホストでプログラムを実行する時には、ここで指定したディレクトリの下に
ファイルを転送してから、実行します。</p>
<p>通常は接続先ホストのホームディレクトリを指定しますが
システムによっては、容量制限やI/O性能の都合で他の領域を使う方が良い場合もあります。
接続先システムの利用ガイド等を参照して適切なディレクトリを選択してください。</p>
<p>また、リモートホストへの接続に公開鍵認証を使う場合は、 <strong>use public key authentication</strong>
のスイッチを有効にしてください。
下側に、秘密鍵を指定する欄が表示されるので、秘密鍵のパスを入力するか、 <strong>BROWSE</strong> ボタンをクリックして
ファイルを選択してください。</p>
<p>その他の詳細な設定内容は<a href="../../3_reference_manual/2_remotehost_screen/index.html" title="remotehost設定">リファレンスマニュアル</a> を
ご参照ください。</p>
<h3 id="7.-%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%9B%E3%82%B9%E3%83%88%E4%B8%8A%E3%81%A7%E3%81%AE%E3%82%BF%E3%82%B9%E3%82%AF%E3%81%AE%E5%AE%9F%E8%A1%8C">7. リモートホスト上でのタスクの実行 <a class="heading-anchor-permalink" href="#7.-%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%9B%E3%82%B9%E3%83%88%E4%B8%8A%E3%81%A7%E3%81%AE%E3%82%BF%E3%82%B9%E3%82%AF%E3%81%AE%E5%AE%9F%E8%A1%8C">#</a></h3>
<p>リモートホスト上でプログラムを実行する準備が整ったので、さきほどのタスクをリモートホストで実行してみましょう。</p>
<p>ワークフロー画面に戻って、task0コンポーネントをクリックしプロパティ画面を表示します。
<strong>host</strong> と書かれた欄をクリックすると、設定したremotehostの一覧が表示されるので、
さきほど作成したリモートホストのラベルを選択してください。</p>
<p><img src="./img/select_host.png" alt="img" title="リモートホスト設定"></p>
<p><strong>save</strong> ボタンをクリックすると準備完了です。ローカルホストで実行した時と同じく
<strong>run project</strong> ボタンをクリックするとプロジェクトの実行が始まりますが
ここでは、リモートホストに接続するためのパスワードを入力するダイアログが
表示されます。</p>
<p>パスワード認証での接続の場合はパスワードを、公開鍵認証での接続の場合は
秘密鍵に設定したパスフレーズを入力して <strong>OK</strong> ボタンをクリックしてください。</p>
<p><img src="./img/password_dialog.png" alt="img" title="パスワード入力ダイアログ"></p>
<p>ログ画面を開くと、実行終了時に <strong>OUTPUT(SSH)</strong> の部分にechoコマンドの出力が表示されています。</p>
<p>出力内容を確認したら、<strong>stop and clean project</strong> ボタンをクリックしてプロジェクトを初期化してください。</p>
<h3 id="8.-%E3%83%90%E3%83%83%E3%83%81%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E7%B5%8C%E7%94%B1%E3%81%A7%E3%81%AE%E3%82%BF%E3%82%B9%E3%82%AF%E3%81%AE%E5%AE%9F%E8%A1%8C">8. バッチシステム経由でのタスクの実行 <a class="heading-anchor-permalink" href="#8.-%E3%83%90%E3%83%83%E3%83%81%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E7%B5%8C%E7%94%B1%E3%81%A7%E3%81%AE%E3%82%BF%E3%82%B9%E3%82%AF%E3%81%AE%E5%AE%9F%E8%A1%8C">#</a></h3>
<p>次は、同じ内容のワークフローをバッチシステム経由で実行してみます。
まずは、リモートホストエディタを起動してください。
さきほど登録したリモートホストが表示されているので、右端の鉛筆アイコンをクリックして
ホスト情報編集ダイアログを表示します</p>
<p><img src="./img/remotehost_editor2.png" alt="img" title="リモートホストエディタ追加編集"></p>
<p>リモートホストで使われているジョブスケジューラの種類を、 <strong>job scheduler</strong> (1) の欄から選んでください。
現在設定可能な値は次の6種類です。</p>
<ul>
<li>PBSPro</li>
<li>PBSProWithoutHistory</li>
<li>SLURM</li>
<li>TCS (Technical Computing Suite)</li>
<li>Fugaku</li>
<li>UGE (Univa Grid Engine)</li>
</ul>
<p>富岳では、TCSが採用されていますが他サイトとは一部挙動が違うため、富岳専用の設定(Fugaku)が用意されています。
また、PBSProは、ジョブスケジューラの設定で、実行終了したジョブの情報を保存しないものがあります。
この場合 <strong>PBSPro</strong> ではなく <strong>PBSProWithoutHistory</strong> を使ってください。</p>
<p>続いて、使用可能なキュー名を <strong>available queues</strong> の欄(2)にカンマ区切りで入力してください。
デフォルトキューが設定されているシステムで、デフォルトキューのみを使う場合は
空欄のままでも構いません。</p>
<p>最後に、ジョブの同時投入本数に制限を行ないたい場合は、 <strong>max number of jobs</strong> の欄(3) に入力してください。</p>
<p>例えば、同時投入本数が10本に制限されているシステムでは11本目のジョブを投入しようとするとエラーになり
ジョブ投入が受け付けられません。WHEEL側で制限を行なうことでこのようなエラーの発生を抑制できます。
ただし、WHEELを使わずに投入されたジョブ数は数えられませんので、グループ単位での同時投入ジョブ数が
制限されているような場合は、制限に抵触する可能性もあります。</p>
<p>以上でリモートホスト設定の変更は終了です。</p>
<p>ワークフロー画面に戻って、再度task0のプロパティ画面を表示してください。</p>
<p>バッチシステムを介してジョブを実行すると、標準出力の内容を取得する方法がシステムによって異なるので、
さきほどのスクリプトを変更して、 <code>stdout.txt</code> というファイルにechoコマンドの結果を出力するように変更しましょう。</p>
<p>プロパティ画面下部のFiles から <code>3. Taskコンポーネントのプロパティ設定</code> で作成したスクリプトを
選択し、テキストエディタで開いてください。</p>
<p>echoコマンドの行末に追記して <code>echo Hello WHEEL &gt; stdout.txt</code> と変更してください。</p>
<p><img src="./img/text_editor2.png" alt="img" title="スクリプト変更"></p>
<p>1回目のスクリプト作成時は、 <strong>SAVE ALL FILES</strong> ボタンをクリックしてファイルを保存しましたが、
今回は別の方法で保存してみましょう。</p>
<p>ファイル名が書かれたタブ部分をクリックすると、<strong>save</strong> <strong>close without save</strong> という2つのメニューが表示されます。</p>
<p>ここでは、 <strong>save</strong> を選択してください。</p>
<p><img src="./img/text_editor3.png" alt="img" title="ファイル毎の保存メニュー"></p>
<p><strong>close without save</strong> をクリックすると編集したテキストが破棄されてタブが閉じられます。</p>
<p>今は、1ファイルしか開いていませんが複数ファイルを開いて編集し、一部のファイルのみを保存したい場合は
こちらの方法で不要なファイルを破棄し、<strong>SAVE ALL FILES</strong> ボタンで一括保存(または、必要なファイルをさらに個別に保存)してください。</p>
<p>スクリプトの編集が終わったらグラフビュー画面に戻って、再びtask0のプロパティを編集します。</p>
<p>まず、<strong>use job scheduler</strong> スイッチ(1)を有効にしてください。
ジョブに関する設定を入力できるようになるので <strong>queue</strong> (2) の欄から投入先のキューを選択してください。</p>
<p><img src="./img/use_job_scheduler.png" alt="img" title="バッチ使用設定"></p>
<p>続いて、スクリプトが出力する <strong>stdout.txt</strong> をダウンロードする設定を追加します。
プロパティ画面の最上部にある <strong>basic</strong> の右にある上向き矢印をクリックしてください。</p>
<p><img src="./img/property_screen5.png" alt="img" title="property折り畳み"></p>
<p>上段の設定項目が折り畳まれて、全てのカテゴリが表示されるので、<strong>remote file setting</strong> を
クリックして開いてください。</p>
<p><img src="./img/property_screen6.png" alt="img" title="remote file setting"></p>
<p>includeの欄(1)に <strong>stdout.txt</strong> と入力してエンターキーを押すか、
右にある <strong>+</strong> ボタン(2)をクリックしてください。</p>
<p><img src="./img/property_screen7.png" alt="img" title="include設定"></p>
<p>設定が終了したら、プロジェクトをsaveして実行してください。</p>
<p>実行終了後に、task0コンポーネントのプロパティから、 <strong>stdout.txt</strong> を選択して
テキストエディタを立ち上げてください。</p>
<p><img src="./img/job_result.png" alt="img" title="ジョブ実行結果確認"></p>
<p>echoコマンドの実行結果がファイルに出力されています。</p>
<p><img src="./img/job_result2.png" alt="img" title="ジョブ実行結果出力"></p>
<p>以上でバッチシステム経由でのタスク実行は終了です。次のチュートリアルのために
<strong>stop and clean project</strong> ボタンをクリックしてプロジェクトを初期化してください。</p>
<h3 id="9.-%E5%85%A5%E5%87%BA%E5%8A%9B%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%8F%97%E3%81%91%E6%B8%A1%E3%81%97">9. 入出力ファイルの受け渡し <a class="heading-anchor-permalink" href="#9.-%E5%85%A5%E5%87%BA%E5%8A%9B%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E5%8F%97%E3%81%91%E6%B8%A1%E3%81%97">#</a></h3>
<p>これまでは、タスクが1つしか無いワークフローを実行してきましたが
実際のワークフローでは、先行するプログラムが出力したファイルを
別のプログラムに渡して処理を行なうことがよくあります。</p>
<p>ここでは、WHEELのタスクコンポーネント間でファイルを受け渡す方法について学びましょう。</p>
<p>まず、ワークフローに2つ目のタスクを追加してください。
最初のタスクの名前を変更しておらずtask0のままにしていた場合、task1という名前のタスクが作成されます。</p>
<p><img src="./img/workflow7.png" alt="img" title="2つ目のタスク"></p>
<p>次に、task0が実行結果として <strong>stdout.txt</strong> というファイルを出力することを指定します。
task0のプロパティ画面を開いて下にスクロールすると、 <strong>input/output files</strong> という行があります。
これをクリックして入力欄を表示し、__output files__に <strong>stdout.txt</strong> を入力してください。</p>
<p><img src="./img/output_files.png" alt="img" title="output file設定 入力"></p>
<p>task0の箱の右下に <strong>stdout.txt</strong> という表示が追加されます。</p>
<p><img src="./img/output_files2.png" alt="img" title="output file設定 GUI"></p>
<p>この右にある▶をドラッグすると線が伸びていくので、task1の上にドロップしてください。</p>
<p><img src="./img/file_dependency.png" alt="img" title="file依存性設定"></p>
<p>これで、task0が出力する <strong>output.txt</strong> を受けとってtask1を実行するという設定ができました。</p>
<p>実際には、まだtask1は未設定ですので、最初のタスクの時と同様に空ファイルを作成して
スクリプトを作りましょう。</p>
<p>スクリプトは <code>ls -l stdout.txt</code> としてtask0からファイルが渡ってきたか確認できるようにしてください。</p>
<p>プロジェクトをsaveして実行すると、ログ出力に次のような出力が見えます</p>
<p><img src="./img/file_dependency_log.png" alt="img" title="outputFileを含むプロジェクトのログ出力"></p>
<p>この結果から分かるように、output fileに指定されたファイルは、後続のコンポーネントに
シンボリックリンクとして渡されます。</p>
<p>実際には、先行するタスクでソルバを実行して、実行結果ファイルを後続のポスト処理コンポーネントに渡したり
先行するタスクでプリ処理を行なって、入力ファイルを後続のソルバコンポーネントに渡すといった使い方が考えられます。</p>
<p>この時、前後のコンポーネントで実行するホストが違っていても、WHEELが自動的にダウンロードして転送するので
ライセンスや、計算機アーキテクチャの都合でそれぞれの処理を別のシステムで実行
同様のワークフローで実行することができます。</p>
<p>以上でコンポーネント間のファイルの受け渡し方法のチュートリアル終了です。次のチュートリアルのために
<strong>stop and clean project</strong> ボタンをクリックしてプロジェクトを初期化してください。</p>
<h3 id="10.-%E3%82%BF%E3%82%B9%E3%82%AF%E5%AE%9F%E8%A1%8C%E9%A0%86%E3%81%AE%E5%88%B6%E5%BE%A1">10. タスク実行順の制御 <a class="heading-anchor-permalink" href="#10.-%E3%82%BF%E3%82%B9%E3%82%AF%E5%AE%9F%E8%A1%8C%E9%A0%86%E3%81%AE%E5%88%B6%E5%BE%A1">#</a></h3>
<p>前の章では、先行するコンポーネントが出力したファイル受けとってから、後続のコンポーネントを実行しました。</p>
<p>実際のワークフローでは、ファイルの受け渡しは発生しないが、
あるプログラムが終わってから、次のプログラムを実行する必要がある
という状況があります。</p>
<p>WHEELには、先行コンポーネントの終了を待ってから実行する機能があるので
この機能を使って2つのタスクの実行順を制御してみましょう。</p>
<h4 id="%E3%82%BF%E3%82%B9%E3%82%AF%E5%86%85%E5%AE%B9%E3%81%AE%E5%A4%89%E6%9B%B4">タスク内容の変更 <a class="heading-anchor-permalink" href="#%E3%82%BF%E3%82%B9%E3%82%AF%E5%86%85%E5%AE%B9%E3%81%AE%E5%A4%89%E6%9B%B4">#</a></h4>
<p>さきほどの、task0, task1の内容ではどちらが先に実行されたのか分かり難いので
それぞれのスクリプトを次のように変更してください。</p>
<p>task0</p>
<pre><code>sleep 10
echo task0
</code></pre>
<p>task1</p>
<pre><code>echo task1
</code></pre>
<p>また、remotehostでの実行待ちなどが発生するのを避けるために、 <strong>host</strong> を
<strong>localhost</strong> に変更してローカル環境で実行するように設定してください。</p>
<p>続いて、stdout.txtは今回は使わないので、output fileの設定を削除します。</p>
<p>まず、 <strong>task0</strong> のプロパティ画面を開いて <strong>input/output files</strong> の
設定欄を表示させ、 <strong>stdout.txt</strong> の右にあるゴミ箱アイコンをクリックしてください。</p>
<p><img src="./img/output_files3.png" alt="img" title="outputFileの削除"></p>
<p><strong>output files</strong> から__stdout.txt__ が削除され、task1の <strong>stdout.txt</strong> と接続された線も削除されます。</p>
<p><img src="./img/output_files4.png" alt="img" title="outputFile削除後のワークフロー"></p>
<p>task1のinput files には、<strong>stdout.txt</strong> の指定が残っていますが、これも同様の操作で削除することができます。
なお、線で結ばれていない input/output files の指定はワークフローの動作には影響しませんので、
一時的に変更する場合などは、使わない設定を残したままでも問題ありません。</p>
<p>この状態で、一旦saveしてワークフローを実行してみましょう。
今は実行順の制御を行なっていないので、task0とtask1はほぼ同時に実行されます。
ログ画面の <strong>STDOUT</strong> タブを見るとtask1は実行開始直後に表示され
task0の方はsleep10 が入っているので10秒後に表示されるはずです。</p>
<p><img src="./img/log_screen3.png" alt="img" title="実行順未指定時のログ"></p>
<p>では、一回プロジェクトを初期化して、task0が先に実行されるようにしてみましょう。</p>
<p>task0の箱の下部にある▼をドラッグして、task1の箱の上部にある■にドロップしてください。
両taskが緑の線で接続されます。</p>
<p><img src="./img/workflow8.png" alt="img" title="実行順指定後のワークフロー"></p>
<p>これで、task0の実行が終了してからtask1が実行されるようになりました。</p>
<p>では、プロジェクトをsaveして実行してみましょう。</p>
<p>ログ出力を見ると今度はtask0が表示されてからtask1が表示されているはずです。</p>
<p><img src="./img/log_screen4.png" alt="img" title="実行順指定時のログ"></p>
<p>これで基本編のチュートリアルは終了です。</p>
<p>本チュートリアルでは扱わなかったWHEELの高度な機能について
知りたい方は <a href="../2_advanced_tutorial/index.html">応用編のチュートリアル</a> に進んでください。</p>
<p>また、個々の機能の詳細な内容については、<a href="../../3_reference_manual/index.html">リファレンスマニュアル</a> をご参照ください。</p>
<hr>
<p><a href="../index.html">チュートリアルのトップページに戻る</a></p>

      </article>
    </div>
    <script>
      // Load contents.json if you need it
    </script>
    <script>
      // FROM http://purecss.io/js/ui.js
      (function(window, document) {
        var layout = document.getElementById("layout"),
          menu = document.getElementById("menu"),
          menuLink = document.getElementById("menuLink");

        function toggleClass(element, className) {
          var classes = element.className.split(/\s+/),
            length = classes.length,
            i = 0;

          for (; i < length; i++) {
            if (classes[i] === className) {
              classes.splice(i, 1);
              break;
            }
          }
          // The className is not found
          if (length === classes.length) {
            classes.push(className);
          }

          element.className = classes.join(" ");
        }

        menuLink.onclick = function(e) {
          var active = "active";

          e.preventDefault();
          toggleClass(layout, active);
          toggleClass(menu, active);
          toggleClass(menuLink, active);
        };
      })(this, this.document);
    </script>
  </body>
</html>
